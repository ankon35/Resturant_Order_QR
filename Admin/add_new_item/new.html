<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="new.css">
    <title>Admin User Management</title>
</head>

<body>
    <div class="sidebar" id="sidebar">
        <h2>PortBuilder Admin</h2>
        <ul>
            <li><a href="/Resturant_Order_QR/Admin/admin.html">Dashboard</a></li>
            <li><a href="#">Add New Item</a></li>
            <li><a href="#" id="logoutBtn">Logout</a></li>
        </ul>
    </div>

    <div class="container">
        <h1>Add New Product</h1>
        <form id="product-form">
            <div class="form-group">
                <label for="category">Product Category</label>
                <select id="category" required>
                    <option value="" disabled selected>Select a category</option>
                    <option value="burger">Burger</option>
                    <option value="pizza">Pizza</option>
                    <option value="set-menu">Set-Menu</option>
                </select>
            </div>

            <div class="form-group hidden" id="name-container">
                <label for="name">Product Name</label>
                <input type="text" id="name" placeholder="Enter product name" required>
            </div>

            <div id="additional-sizes" class="hidden"></div>

            <div class="form-group hidden" id="add-size-container">
                <a href="#" id="add-size-btn" style="color: blue;">Add Sizes</a>
            </div>

            <div class="form-group hidden" id="picture-container">
                <label for="picture">Product Picture</label>
                <input type="file" id="picture" accept="image/*" required>
            </div>

            <div class="form-group hidden" id="description-container">
                <label for="description">Description</label>
                <textarea id="description" placeholder="Enter product description" required></textarea>
            </div>

            <button type="submit" class="hidden" id="submit-btn">Add Product</button>
        </form>
    </div>


    <!-- <script type="module" src="new.js"></script> -->

    <script>
        const selectedSizes = new Set();
        const categoryDropdown = document.getElementById('category');
        const addSizeButton = document.getElementById('add-size-btn');
    
        // Function to update the visibility of the "Add Sizes" button
        function updateAddSizeButtonVisibility() {
            if (categoryDropdown.value === 'set-menu') {
                addSizeButton.style.display = 'none'; // Hide the "Add Sizes" button
            } else {
                addSizeButton.style.display = 'inline'; // Show the "Add Sizes" button
            }
        }
    
        // Initial check to set the visibility of the "Add Sizes" button
        updateAddSizeButtonVisibility();
    
        // Event listener for category dropdown
        categoryDropdown.addEventListener('change', function () {
            updateAddSizeButtonVisibility();
        });
    
        addSizeButton.addEventListener('click', function () {
            const additionalSizesContainer = document.getElementById('additional-sizes');
    
            // Create new size dropdown
            const newSizeDiv = document.createElement('div');
            newSizeDiv.classList.add('form-group');
    
            const newSizeLabel = document.createElement('label');
            newSizeLabel.textContent = 'Size';
            newSizeDiv.appendChild(newSizeLabel);
    
            const newSizeSelect = document.createElement('select');
            newSizeSelect.required = true;
    
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.disabled = true;
            defaultOption.selected = true;
            defaultOption.textContent = 'Select size';
            newSizeSelect.appendChild(defaultOption);
    
            // Add options for sizes
            const sizes = ['small', 'medium', 'large'];
            sizes.forEach(size => {
                const option = document.createElement('option');
                option.value = size;
                option.textContent = size.charAt(0).toUpperCase() + size.slice(1);
                // Disable option if it has already been selected
                if (selectedSizes.has(size)) {
                    option.disabled = true;
                }
                newSizeSelect.appendChild(option);
            });
    
            newSizeDiv.appendChild(newSizeSelect);
    
            // Create new price input
            const newPriceDiv = document.createElement('div');
            newPriceDiv.classList.add('form-group');
    
            const newPriceLabel = document.createElement('label');
            newPriceLabel.textContent = 'Price';
            newPriceDiv.appendChild(newPriceLabel);
    
            const newPriceInput = document.createElement('input');
            newPriceInput.type = 'number';
            newPriceInput.placeholder = 'Enter price for selected size';
            newPriceInput.required = true;
            newPriceDiv.appendChild(newPriceInput);
    
            // Append new size dropdown and price input to the container
            additionalSizesContainer.appendChild(newSizeDiv);
            additionalSizesContainer.appendChild(newPriceDiv);
    
            // Add an event listener to the new size select to track selected sizes
            newSizeSelect.addEventListener('change', function () {
                const selectedValue = newSizeSelect.value;
    
                // If a size is selected
                if (selectedValue) {
                    // If the previous value was not the default, remove it from the set
                    if (newSizeSelect.dataset.previousValue) {
                        selectedSizes.delete(newSizeSelect.dataset.previousValue);
                    }
                    // Add the new selected value to the set
                    selectedSizes.add(selectedValue);
                    newSizeSelect.dataset.previousValue = selectedValue; // Store the current value for future reference
    
                    // Disable the selected option in all future dropdowns
                    const allSelects = document.querySelectorAll('#additional-sizes select');
                    allSelects.forEach(select => {
                        const options = select.querySelectorAll('option');
                        options.forEach(option => {
                            if (selectedSizes.has(option.value)) {
                                option.disabled = true;
                            }
                        });
                    });
                } else {
                    // If the default option is selected, remove the previous value from the set
                    if (newSizeSelect.dataset.previousValue) {
                        selectedSizes.delete(newSizeSelect.dataset.previousValue);
                        newSizeSelect.dataset.previousValue = null; // Clear the previous value
                    }
                }
    
                // Re-enable previously selected sizes in all dropdowns
                const allSelects = document.querySelectorAll('#additional-sizes select');
                allSelects.forEach(select => {
                    const options = select.querySelectorAll('option');
                    options.forEach(option => {
                        if (!selectedSizes.has(option.value)) {
                            option.disabled = false; // Enable the option if it's not in the selectedSizes set
                        }
                    });
                });
            });
        });
    </script>

</html>